#!/bin/bash

url="git@github.com:openpatch/"
projects=(
  "branding"
  "hyperbook"
  "hyperbook-informatik"
  "hyperbook-mathematik"
  "manual-neural-network"
  "online-ide-nrw"
  "org"
  "scratch-for-java"
  "sqlide"
  "struktog"
  "videos"
)

for project in ${projects[@]}
do
  path="$HOME/Sources/openpatch/${project}"

  if [ ! -d "$path" ]; then
    pushd $HOME/Sources/openpatch
      git clone ${url}${project}.git
    popd
  fi

  tmux new-session -d -s $project

  window=1
  tmux rename-window -t $project:$window "nvim"
  tmux send-keys -t $project:$window "cd ${path}" C-m
  tmux send-keys -t $project:$window "distrobox enter fedora" C-m

  window=2
  tmux new-window -t $project:$window -n "server"
  tmux send-keys -t $project:$window "cd ${path}" C-m
  tmux send-keys -t $project:$window "distrobox enter fedora" C-m

  window=3
  tmux new-window -t $project:$window -n "git"
  tmux send-keys -t $project:$window "cd ${path}" C-m
  tmux send-keys -t $project:$window "git pull" C-m
  tmux send-keys -t $project:$window "distrobox enter fedora" C-m
done
