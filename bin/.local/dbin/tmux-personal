#!/bin/bash

url="git@github.com:mikebarkmin/"
projects=(
  "hyperbook-ki"
  "hyperbook-konzeptspeicher"
  "hyperbook-spieleentwicklung"
  "mikebarkmin.github.io"
  "schule-material"
  "silberblau"
  "ulauncher-obsidian"
  "ulauncher-snippets"
  "ulauncher-snippets-files"
)

for project in ${projects[@]}
do
  path="$HOME/Sources/${project}"

  if [ ! -d "$path" ]; then
    pushd $HOME/Sources
      git clone ${url}${project}.git
    popd
  fi

  tmux new-session -d -s $project

  window=1
  tmux rename-window -t $project:$window "nvim"
  tmux send-keys -t $project:$window "cd ${path}" C-m
  tmux send-keys -t $project:$window "distrobox enter fedora" C-m

  window=2
  tmux new-window -t $project:$window -n "server"
  tmux send-keys -t $project:$window "cd ${path}" C-m
  tmux send-keys -t $project:$window "distrobox enter fedora" C-m

  window=3
  tmux new-window -t $project:$window -n "git"
  tmux send-keys -t $project:$window "cd ${path}" C-m
  tmux send-keys -t $project:$window "git pull" C-m
  tmux send-keys -t $project:$window "distrobox enter fedora" C-m
done
